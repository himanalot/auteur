<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Maximise AE Tools</title>
</head>
<body>
    <div id="root"></div>
    
    <!-- Debug Console -->
    <div id="debugConsole" style="position: fixed; bottom: 10px; right: 10px; width: 300px; height: 200px; background: #1a1a1a; border: 1px solid #333; border-radius: 4px; z-index: 9999; display: none; flex-direction: column;">
        <div style="background: #333; padding: 5px 10px; display: flex; justify-content: space-between; align-items: center; border-radius: 4px 4px 0 0;">
            <span style="color: #fff; font-size: 12px; font-weight: bold;">Debug Console</span>
            <div>
                <button onclick="copyDebugLogs()" style="background: #007acc; color: white; border: none; padding: 2px 6px; margin-right: 5px; border-radius: 2px; font-size: 10px; cursor: pointer;">Copy</button>
                <button onclick="toggleDebugConsole()" style="background: #666; color: white; border: none; padding: 2px 6px; border-radius: 2px; font-size: 10px; cursor: pointer;">Ã—</button>
            </div>
        </div>
        <div id="debugLogs" style="flex: 1; overflow-y: auto; padding: 5px; color: #ccc; font-family: monospace; font-size: 10px; line-height: 1.2; white-space: pre-wrap;"></div>
    </div>
    
    <!-- Toggle button for debug console -->
    <button id="debugToggle" onclick="toggleDebugConsole()" style="position: fixed; bottom: 10px; right: 10px; background: #007acc; color: white; border: none; padding: 5px 10px; border-radius: 4px; z-index: 9998; font-size: 11px; cursor: pointer;">Debug</button>
    
    <script>
        let debugMessages = [];
        
        function addDebugLog(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
            debugMessages.push(logEntry);
            
            const debugLogs = document.getElementById('debugLogs');
            if (debugLogs) {
                debugLogs.textContent = debugMessages.slice(-100).join('\n'); // Keep last 100 messages
                debugLogs.scrollTop = debugLogs.scrollHeight;
            }
        }
        
        function toggleDebugConsole() {
            const console = document.getElementById('debugConsole');
            const toggle = document.getElementById('debugToggle');
            if (console.style.display === 'none') {
                console.style.display = 'flex';
                toggle.style.display = 'none';
            } else {
                console.style.display = 'none';
                toggle.style.display = 'block';
            }
        }
        
        function copyDebugLogs() {
            const text = debugMessages.join('\n');
            navigator.clipboard.writeText(text).then(() => {
                addDebugLog('Debug logs copied to clipboard');
            }).catch(() => {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                addDebugLog('Debug logs copied to clipboard (fallback)');
            });
        }
        
        // Override console methods to capture logs
        const originalConsole = {
            log: console.log,
            error: console.error,
            warn: console.warn,
            info: console.info
        };
        
        console.log = function(...args) {
            addDebugLog(args.join(' '), 'log');
            originalConsole.log.apply(console, args);
        };
        
        console.error = function(...args) {
            addDebugLog(args.join(' '), 'error');
            originalConsole.error.apply(console, args);
        };
        
        console.warn = function(...args) {
            addDebugLog(args.join(' '), 'warn');
            originalConsole.warn.apply(console, args);
        };
        
        console.info = function(...args) {
            addDebugLog(args.join(' '), 'info');
            originalConsole.info.apply(console, args);
        };
        
        // Initial log
        addDebugLog('Debug console initialized');
    </script>
    
    <script src="js/libs/CSInterface.js"></script>
    <script src="js/websocket-client.js"></script>
    <script src="js/rag_enhanced.js"></script>
    <script src="js/rag_tool.js"></script>
    <script src="js/simple_chat.js"></script>
    <script src="js/video_chat.js"></script>
</body>
</html>